{"version":3,"file":"index.js","names":["fs","require","path","Sequelize","process","basename","__filename","env","NODE_ENV","config","db","sequelize","DEV_DATABASE_URL","url","readdirSync","__dirname","filter","file","indexOf","slice","forEach","model","join","DataTypes","name","Object","keys","modelName","associate","module","exports"],"sources":["../../../src/database/models/index.js"],"sourcesContent":["const fs = require('fs');\nconst path = require('path');\nconst Sequelize = require('sequelize');\nconst process = require('process');\n\nconst basename = path.basename(__filename);\nconst env = process.env.NODE_ENV || 'development';\nconst config = require('../../config/config.js')[env];\n\nconst db = {};\n\nlet sequelize;\nif (process.env.DEV_DATABASE_URL) {\n  sequelize = new Sequelize(process.env.DEV_DATABASE_URL, config);\n} else {\n  sequelize = new Sequelize(config.url, config);\n}\n\nfs.readdirSync(__dirname)\n  .filter((file) => (\n    file.indexOf('.') !== 0\n      && file !== basename\n      && file.slice(-3) === '.js'\n      && file.indexOf('.test.js') === -1\n  ))\n  .forEach((file) => {\n    const model = require(path.join(__dirname, file))(\n      sequelize,\n      Sequelize.DataTypes,\n    );\n    db[model.name] = model;\n  });\n\nObject.keys(db).forEach((modelName) => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\n\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\n\nmodule.exports = db;\n"],"mappings":";;AAAA,IAAMA,EAAE,GAAGC,OAAO,CAAC,IAAI,CAAC;AACxB,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5B,IAAME,SAAS,GAAGF,OAAO,CAAC,WAAW,CAAC;AACtC,IAAMG,OAAO,GAAGH,OAAO,CAAC,SAAS,CAAC;AAElC,IAAMI,QAAQ,GAAGH,IAAI,CAACG,QAAQ,CAACC,UAAU,CAAC;AAC1C,IAAMC,GAAG,GAAGH,OAAO,CAACG,GAAG,CAACC,QAAQ,IAAI,aAAa;AACjD,IAAMC,MAAM,GAAGR,OAAO,CAAC,wBAAwB,CAAC,CAACM,GAAG,CAAC;AAErD,IAAMG,EAAE,GAAG,CAAC,CAAC;AAEb,IAAIC,SAAS;AACb,IAAIP,OAAO,CAACG,GAAG,CAACK,gBAAgB,EAAE;EAChCD,SAAS,GAAG,IAAIR,SAAS,CAACC,OAAO,CAACG,GAAG,CAACK,gBAAgB,EAAEH,MAAM,CAAC;AACjE,CAAC,MAAM;EACLE,SAAS,GAAG,IAAIR,SAAS,CAACM,MAAM,CAACI,GAAG,EAAEJ,MAAM,CAAC;AAC/C;AAEAT,EAAE,CAACc,WAAW,CAACC,SAAS,CAAC,CACtBC,MAAM,CAAC,UAACC,IAAI;EAAA,OACXA,IAAI,CAACC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAClBD,IAAI,KAAKZ,QAAQ,IACjBY,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,IACxBF,IAAI,CAACC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;AAAA,CACrC,CAAC,CACDE,OAAO,CAAC,UAACH,IAAI,EAAK;EACjB,IAAMI,KAAK,GAAGpB,OAAO,CAACC,IAAI,CAACoB,IAAI,CAACP,SAAS,EAAEE,IAAI,CAAC,CAAC,CAC/CN,SAAS,EACTR,SAAS,CAACoB,SAAS,CACpB;EACDb,EAAE,CAACW,KAAK,CAACG,IAAI,CAAC,GAAGH,KAAK;AACxB,CAAC,CAAC;AAEJI,MAAM,CAACC,IAAI,CAAChB,EAAE,CAAC,CAACU,OAAO,CAAC,UAACO,SAAS,EAAK;EACrC,IAAIjB,EAAE,CAACiB,SAAS,CAAC,CAACC,SAAS,EAAE;IAC3BlB,EAAE,CAACiB,SAAS,CAAC,CAACC,SAAS,CAAClB,EAAE,CAAC;EAC7B;AACF,CAAC,CAAC;AAEFA,EAAE,CAACC,SAAS,GAAGA,SAAS;AACxBD,EAAE,CAACP,SAAS,GAAGA,SAAS;AAExB0B,MAAM,CAACC,OAAO,GAAGpB,EAAE"}