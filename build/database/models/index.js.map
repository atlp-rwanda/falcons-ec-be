{"version":3,"file":"index.js","names":["fs","require","path","Sequelize","process","User","Product","basename","__filename","env","NODE_ENV","config","db","sequelize","use_env_variable","url","readdirSync","__dirname","filter","file","indexOf","slice","forEach","model","join","DataTypes","name","Object","keys","modelName","associate","module","exports"],"sources":["../../../src/database/models/index.js"],"sourcesContent":["const fs = require('fs');\nconst path = require('path');\nconst Sequelize = require('sequelize');\nconst process = require('process');\nconst User = require('./user');\nconst Product = require('./product');\n\nconst basename = path.basename(__filename);\nconst env = process.env.NODE_ENV || 'development';\nconst config = require('../../config/config.js')[env];\n\nconst db = {};\n\nlet sequelize;\nif (config.use_env_variable) {\n  sequelize = new Sequelize(process.env[config.use_env_variable], config);\n} else {\n  sequelize = new Sequelize(config.url, config);\n}\n\nfs.readdirSync(__dirname)\n  .filter(\n    (file) =>\n      file.indexOf('.') !== 0 &&\n      file !== basename &&\n      file.slice(-3) === '.js' &&\n      file.indexOf('.test.js') === -1,\n  )\n  .forEach((file) => {\n    const model = require(path.join(__dirname, file))(\n      sequelize,\n      Sequelize.DataTypes,\n    );\n    db[model.name] = model;\n  });\n\nObject.keys(db).forEach((modelName) => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\n\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\n\nmodule.exports = db;\n"],"mappings":";;AAAA,IAAMA,EAAE,GAAGC,OAAO,CAAC,IAAI,CAAC;AACxB,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5B,IAAME,SAAS,GAAGF,OAAO,CAAC,WAAW,CAAC;AACtC,IAAMG,OAAO,GAAGH,OAAO,CAAC,SAAS,CAAC;AAClC,IAAMI,IAAI,GAAGJ,OAAO,CAAC,QAAQ,CAAC;AAC9B,IAAMK,OAAO,GAAGL,OAAO,CAAC,WAAW,CAAC;AAEpC,IAAMM,QAAQ,GAAGL,IAAI,CAACK,QAAQ,CAACC,UAAU,CAAC;AAC1C,IAAMC,GAAG,GAAGL,OAAO,CAACK,GAAG,CAACC,QAAQ,IAAI,aAAa;AACjD,IAAMC,MAAM,GAAGV,OAAO,CAAC,wBAAwB,CAAC,CAACQ,GAAG,CAAC;AAErD,IAAMG,EAAE,GAAG,CAAC,CAAC;AAEb,IAAIC,SAAS;AACb,IAAIF,MAAM,CAACG,gBAAgB,EAAE;EAC3BD,SAAS,GAAG,IAAIV,SAAS,CAACC,OAAO,CAACK,GAAG,CAACE,MAAM,CAACG,gBAAgB,CAAC,EAAEH,MAAM,CAAC;AACzE,CAAC,MAAM;EACLE,SAAS,GAAG,IAAIV,SAAS,CAACQ,MAAM,CAACI,GAAG,EAAEJ,MAAM,CAAC;AAC/C;AAEAX,EAAE,CAACgB,WAAW,CAACC,SAAS,CAAC,CACtBC,MAAM,CACL,UAACC,IAAI;EAAA,OACHA,IAAI,CAACC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IACvBD,IAAI,KAAKZ,QAAQ,IACjBY,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,IACxBF,IAAI,CAACC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;AAAA,EAClC,CACAE,OAAO,CAAC,UAACH,IAAI,EAAK;EACjB,IAAMI,KAAK,GAAGtB,OAAO,CAACC,IAAI,CAACsB,IAAI,CAACP,SAAS,EAAEE,IAAI,CAAC,CAAC,CAC/CN,SAAS,EACTV,SAAS,CAACsB,SAAS,CACpB;EACDb,EAAE,CAACW,KAAK,CAACG,IAAI,CAAC,GAAGH,KAAK;AACxB,CAAC,CAAC;AAEJI,MAAM,CAACC,IAAI,CAAChB,EAAE,CAAC,CAACU,OAAO,CAAC,UAACO,SAAS,EAAK;EACrC,IAAIjB,EAAE,CAACiB,SAAS,CAAC,CAACC,SAAS,EAAE;IAC3BlB,EAAE,CAACiB,SAAS,CAAC,CAACC,SAAS,CAAClB,EAAE,CAAC;EAC7B;AACF,CAAC,CAAC;AAEFA,EAAE,CAACC,SAAS,GAAGA,SAAS;AACxBD,EAAE,CAACT,SAAS,GAAGA,SAAS;AAExB4B,MAAM,CAACC,OAAO,GAAGpB,EAAE"}