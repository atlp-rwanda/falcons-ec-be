{"version":3,"file":"passport.js","names":["_passport","_interopRequireDefault","require","_passportGoogleOauth","_dotenv","_models","User","db","dotenv","config","passport","use","GoogleStrategy","clientID","process","env","GOOGLE_CLIENT_ID","clientSecret","GOOGLE_CLIENT_SECRET","callbackURL","concat","CALLBACK_URL","passReqToCallBack","_ref","_asyncToGenerator2","_regenerator","mark","_callee","request","accessToken","refreshToken","profile","done","googleUser","wrap","_callee$","_context","prev","next","findOne","where","email","sent","stop","_x","_x2","_x3","_x4","_x5","apply","arguments","serializeUser","user"],"sources":["../../src/config/passport.js"],"sourcesContent":["import passport from 'passport';\nimport { Strategy as GoogleStrategy } from 'passport-google-oauth2';\nimport dotenv from 'dotenv';\nimport db from '../database/models';\n\nconst { User } = db;\n\ndotenv.config();\npassport.use(\n  new GoogleStrategy(\n    {\n      clientID: process.env.GOOGLE_CLIENT_ID,\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET,\n      callbackURL: `${process.env.CALLBACK_URL}/google/callback`,\n      passReqToCallBack: true,\n    },\n    async (request, accessToken, refreshToken, profile, done) => {\n      const googleUser = await User.findOne({\n        where: { email: [profile.email] },\n      });\n      if (googleUser) {\n        done(null, profile);\n      }\n    },\n  ),\n);\npassport.serializeUser((user, done) => {\n  done(null, user);\n});\n"],"mappings":";;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,oBAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,OAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAEA,IAAQI,IAAI,GAAKC,kBAAE,CAAXD,IAAI;AAEZE,kBAAM,CAACC,MAAM,EAAE;AACfC,oBAAQ,CAACC,GAAG,CACV,IAAIC,6BAAc,CAChB;EACEC,QAAQ,EAAEC,OAAO,CAACC,GAAG,CAACC,gBAAgB;EACtCC,YAAY,EAAEH,OAAO,CAACC,GAAG,CAACG,oBAAoB;EAC9CC,WAAW,KAAAC,MAAA,CAAKN,OAAO,CAACC,GAAG,CAACM,YAAY,qBAAkB;EAC1DC,iBAAiB,EAAE;AACrB,CAAC;EAAA,IAAAC,IAAA,OAAAC,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CACD,SAAAC,QAAOC,OAAO,EAAEC,WAAW,EAAEC,YAAY,EAAEC,OAAO,EAAEC,IAAI;IAAA,IAAAC,UAAA;IAAA,OAAAR,YAAA,YAAAS,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAAF,QAAA,CAAAE,IAAA;UAAA,OAC7BhC,IAAI,CAACiC,OAAO,CAAC;YACpCC,KAAK,EAAE;cAAEC,KAAK,EAAE,CAACV,OAAO,CAACU,KAAK;YAAE;UAClC,CAAC,CAAC;QAAA;UAFIR,UAAU,GAAAG,QAAA,CAAAM,IAAA;UAGhB,IAAIT,UAAU,EAAE;YACdD,IAAI,CAAC,IAAI,EAAED,OAAO,CAAC;UACrB;QAAC;QAAA;UAAA,OAAAK,QAAA,CAAAO,IAAA;MAAA;IAAA,GAAAhB,OAAA;EAAA,CACF;EAAA,iBAAAiB,EAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA;IAAA,OAAAzB,IAAA,CAAA0B,KAAA,OAAAC,SAAA;EAAA;AAAA,IACF,CACF;AACDxC,oBAAQ,CAACyC,aAAa,CAAC,UAACC,IAAI,EAAEpB,IAAI,EAAK;EACrCA,IAAI,CAAC,IAAI,EAAEoB,IAAI,CAAC;AAClB,CAAC,CAAC"}