{"version":3,"file":"userController.js","names":["_index","_interopRequireDefault","require","_token_generator","User","db","getAllUsers","_ref","_asyncToGenerator2","_regenerator","mark","_callee","req","res","allUsers","wrap","_callee$","_context","prev","next","findAll","sent","status","json","message","stop","_x","_x2","apply","arguments","exports","loginUser","_ref2","_callee2","_req$body","email","password","user","payload","token","_callee2$","_context2","body","findOne","where","t0","checkPassword","id","generateToken","success","t1","send","error","_x3","_x4","_default"],"sources":["../../src/controllers/userController.js"],"sourcesContent":["// eslint-disable-next-line import/no-extraneous-dependencies\nimport db from '../database/models/index';\nimport generateToken from '../helpers/token_generator';\n\nconst { User } = db;\n\nexport const getAllUsers = async (req, res) => {\n  const allUsers = await User.findAll();\n\n  if (!allUsers) res.status(400).json({ message: 'No users found' });\n\n  res.json(allUsers);\n};\n\nexport const loginUser = async (req, res) => {\n  try {\n    const { email, password } = req.body;\n    const user = await User.findOne({ where: { email } });\n\n    if (user && (await user.checkPassword(password))) {\n      const payload = {\n        id: user.id,\n        email,\n      };\n      const token = await generateToken(payload);\n      res.status(200).json({\n        status: 200,\n        success: true,\n        message: 'Login successful',\n        token,\n      });\n    } else {\n      res.status(401).json({\n        status: 401,\n        success: false,\n        message: 'Invalid credentials',\n      });\n    }\n  } catch (error) {\n    res.status(500).send({\n      status: 500,\n      success: false,\n      message: 'Failed to Login',\n      error: error.message,\n    });\n  }\n};\n\nexport default { getAllUsers, loginUser };\n"],"mappings":"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"}